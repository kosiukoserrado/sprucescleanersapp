{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{getAllUsers,getJobs,getCourses}from'../firebase/firestore';import{useAuth}from'../components/AuthContext';import'../styles/AdminDashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=()=>{const{currentUser,isAdmin}=useAuth();const[stats,setStats]=useState({totalCleaners:0,totalJobs:0,openJobs:0,totalCourses:0,recentApplications:0});const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchAdminData=async()=>{if(!currentUser||!isAdmin)return;try{setLoading(true);// Fetch users\nconst usersResult=await getAllUsers();// Fetch jobs\nconst jobsResult=await getJobs();// Fetch courses\nconst coursesResult=await getCourses();if(usersResult.success&&jobsResult.success&&coursesResult.success){// Calculate stats\nconst cleaners=usersResult.users.filter(user=>user.role==='cleaner');const openJobs=jobsResult.jobs.filter(job=>job.status==='open');setStats({totalCleaners:cleaners.length,totalJobs:jobsResult.jobs.length,openJobs:openJobs.length,totalCourses:coursesResult.courses.length,recentApplications:0// This would require additional API call\n});}else{setError('Failed to fetch admin data');}}catch(err){setError('Error fetching admin data: '+err.message);}finally{setLoading(false);}};fetchAdminData();},[currentUser,isAdmin]);if(!isAdmin){return/*#__PURE__*/_jsx(\"div\",{className:\"admin-dashboard-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You do not have permission to access the admin dashboard.\"}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"back-link\",children:\"Return to Dashboard\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Dashboard\"}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading admin dashboard...\"})]}):error?/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Cleaners\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.totalCleaners}),/*#__PURE__*/_jsx(Link,{to:\"/admin/cleaners\",className:\"stat-link\",children:\"View All Cleaners\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Jobs\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.totalJobs}),/*#__PURE__*/_jsx(Link,{to:\"/admin/jobs\",className:\"stat-link\",children:\"Manage Jobs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Open Jobs\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.openJobs}),/*#__PURE__*/_jsx(Link,{to:\"/admin/jobs\",className:\"stat-link\",children:\"View Open Jobs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Training Courses\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-value\",children:stats.totalCourses}),/*#__PURE__*/_jsx(Link,{to:\"/admin/courses\",className:\"stat-link\",children:\"Manage Courses\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-actions\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/jobs/new\",className:\"action-button create-job\",children:\"Create New Job\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/courses/new\",className:\"action-button create-course\",children:\"Create New Course\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/applications\",className:\"action-button view-applications\",children:\"Review Applications\"})]})]})]})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","getAllUsers","getJobs","getCourses","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","currentUser","isAdmin","stats","setStats","totalCleaners","totalJobs","openJobs","totalCourses","recentApplications","loading","setLoading","error","setError","fetchAdminData","usersResult","jobsResult","coursesResult","success","cleaners","users","filter","user","role","jobs","job","status","length","courses","err","message","className","children","to"],"sources":["/Users/kosiuko/Documents/mnv2spruces/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getAllUsers, getJobs, getCourses } from '../firebase/firestore';\nimport { useAuth } from '../components/AuthContext';\nimport '../styles/AdminDashboard.css';\n\nconst AdminDashboard = () => {\n  const { currentUser, isAdmin } = useAuth();\n  const [stats, setStats] = useState({\n    totalCleaners: 0,\n    totalJobs: 0,\n    openJobs: 0,\n    totalCourses: 0,\n    recentApplications: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchAdminData = async () => {\n      if (!currentUser || !isAdmin) return;\n      \n      try {\n        setLoading(true);\n        \n        // Fetch users\n        const usersResult = await getAllUsers();\n        \n        // Fetch jobs\n        const jobsResult = await getJobs();\n        \n        // Fetch courses\n        const coursesResult = await getCourses();\n        \n        if (usersResult.success && jobsResult.success && coursesResult.success) {\n          // Calculate stats\n          const cleaners = usersResult.users.filter(user => user.role === 'cleaner');\n          const openJobs = jobsResult.jobs.filter(job => job.status === 'open');\n          \n          setStats({\n            totalCleaners: cleaners.length,\n            totalJobs: jobsResult.jobs.length,\n            openJobs: openJobs.length,\n            totalCourses: coursesResult.courses.length,\n            recentApplications: 0 // This would require additional API call\n          });\n        } else {\n          setError('Failed to fetch admin data');\n        }\n      } catch (err) {\n        setError('Error fetching admin data: ' + err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchAdminData();\n  }, [currentUser, isAdmin]);\n\n  if (!isAdmin) {\n    return (\n      <div className=\"admin-dashboard-container\">\n        <div className=\"error-message\">\n          <h2>Access Denied</h2>\n          <p>You do not have permission to access the admin dashboard.</p>\n          <Link to=\"/dashboard\" className=\"back-link\">Return to Dashboard</Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"admin-dashboard-container\">\n      <h1>Admin Dashboard</h1>\n      \n      {loading ? (\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading admin dashboard...</p>\n        </div>\n      ) : error ? (\n        <div className=\"error-message\">{error}</div>\n      ) : (\n        <>\n          <div className=\"stats-grid\">\n            <div className=\"stat-card\">\n              <h3>Total Cleaners</h3>\n              <div className=\"stat-value\">{stats.totalCleaners}</div>\n              <Link to=\"/admin/cleaners\" className=\"stat-link\">View All Cleaners</Link>\n            </div>\n            \n            <div className=\"stat-card\">\n              <h3>Total Jobs</h3>\n              <div className=\"stat-value\">{stats.totalJobs}</div>\n              <Link to=\"/admin/jobs\" className=\"stat-link\">Manage Jobs</Link>\n            </div>\n            \n            <div className=\"stat-card\">\n              <h3>Open Jobs</h3>\n              <div className=\"stat-value\">{stats.openJobs}</div>\n              <Link to=\"/admin/jobs\" className=\"stat-link\">View Open Jobs</Link>\n            </div>\n            \n            <div className=\"stat-card\">\n              <h3>Training Courses</h3>\n              <div className=\"stat-value\">{stats.totalCourses}</div>\n              <Link to=\"/admin/courses\" className=\"stat-link\">Manage Courses</Link>\n            </div>\n          </div>\n          \n          <div className=\"admin-actions\">\n            <h2>Quick Actions</h2>\n            <div className=\"action-buttons\">\n              <Link to=\"/admin/jobs/new\" className=\"action-button create-job\">\n                Create New Job\n              </Link>\n              <Link to=\"/admin/courses/new\" className=\"action-button create-course\">\n                Create New Course\n              </Link>\n              <Link to=\"/admin/applications\" className=\"action-button view-applications\">\n                Review Applications\n              </Link>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}