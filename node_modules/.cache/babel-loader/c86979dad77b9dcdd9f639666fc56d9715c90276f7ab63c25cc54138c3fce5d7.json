{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{getUserCourseProgress,getCourses}from'../firebase/firestore';import{useAuth}from'../components/AuthContext';import'../styles/CompletedCourses.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CompletedCourses=()=>{const{currentUser}=useAuth();const navigate=useNavigate();const[completedCourses,setCompletedCourses]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchCompletedCourses=async()=>{if(!currentUser)return;try{setLoading(true);// Get user's course progress\nconst progressResult=await getUserCourseProgress(currentUser.uid);if(!progressResult.success){setError('Failed to fetch your completed courses');return;}// Get all courses to match with progress\nconst coursesResult=await getCourses();if(!coursesResult.success){setError('Failed to fetch courses');return;}// Combine course data with progress data, only for completed courses\nconst completedWithCourseDetails=progressResult.progress.filter(progress=>progress.completed)// Only include completed courses\n.map(progress=>{const courseDetails=coursesResult.courses.find(course=>course.id===progress.courseId);return{...progress,courseTitle:(courseDetails===null||courseDetails===void 0?void 0:courseDetails.title)||'Unknown Course',courseDescription:(courseDetails===null||courseDetails===void 0?void 0:courseDetails.description)||'',courseCategory:(courseDetails===null||courseDetails===void 0?void 0:courseDetails.category)||'',courseImageUrl:(courseDetails===null||courseDetails===void 0?void 0:courseDetails.imageUrl)||''};});setCompletedCourses(completedWithCourseDetails);}catch(err){setError('Error fetching completed courses: '+err.message);}finally{setLoading(false);}};fetchCompletedCourses();},[currentUser]);return/*#__PURE__*/_jsxs(\"div\",{className:\"completed-courses-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Completed Courses\"}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading your completed courses...\"})]}):error?/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}):completedCourses.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-completed-message\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"You haven't completed any courses yet.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"browse-courses-button\",onClick:()=>navigate('/training'),children:\"Browse Training Courses\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"completed-courses-list\",children:completedCourses.map(course=>/*#__PURE__*/_jsxs(\"div\",{className:\"completed-course-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-image\",children:[course.courseImageUrl?/*#__PURE__*/_jsx(\"img\",{src:course.courseImageUrl,alt:course.courseTitle}):/*#__PURE__*/_jsx(\"div\",{className:\"placeholder-image\",children:/*#__PURE__*/_jsx(\"span\",{children:course.courseTitle.charAt(0)})}),/*#__PURE__*/_jsx(\"div\",{className:\"course-category\",children:course.courseCategory}),/*#__PURE__*/_jsx(\"div\",{className:\"completion-badge\",children:\"Completed\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:course.courseTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"course-description\",children:course.courseDescription}),/*#__PURE__*/_jsxs(\"div\",{className:\"completion-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"completion-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Completed On:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:new Date(course.completedAt).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"completion-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Started On:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:new Date(course.startedAt).toLocaleDateString()})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"view-certificate-button\",onClick:()=>navigate(`/certificate/${course.courseId}`),children:\"View Certificate\"})]})]},course.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"courses-navigation\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"view-progress-button\",onClick:()=>navigate('/progress'),children:\"View Courses in Progress\"}),/*#__PURE__*/_jsx(\"button\",{className:\"browse-courses-button\",onClick:()=>navigate('/training'),children:\"Browse All Courses\"})]})]});};export default CompletedCourses;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","getUserCourseProgress","getCourses","useAuth","jsx","_jsx","jsxs","_jsxs","CompletedCourses","currentUser","navigate","completedCourses","setCompletedCourses","loading","setLoading","error","setError","fetchCompletedCourses","progressResult","uid","success","coursesResult","completedWithCourseDetails","progress","filter","completed","map","courseDetails","courses","find","course","id","courseId","courseTitle","title","courseDescription","description","courseCategory","category","courseImageUrl","imageUrl","err","message","className","children","length","onClick","src","alt","charAt","Date","completedAt","toLocaleDateString","startedAt"],"sources":["/Users/kosiuko/Documents/mnv2spruces/src/pages/CompletedCourses.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getUserCourseProgress, getCourses } from '../firebase/firestore';\nimport { useAuth } from '../components/AuthContext';\nimport '../styles/CompletedCourses.css';\n\nconst CompletedCourses = () => {\n  const { currentUser } = useAuth();\n  const navigate = useNavigate();\n  const [completedCourses, setCompletedCourses] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchCompletedCourses = async () => {\n      if (!currentUser) return;\n      \n      try {\n        setLoading(true);\n        \n        // Get user's course progress\n        const progressResult = await getUserCourseProgress(currentUser.uid);\n        \n        if (!progressResult.success) {\n          setError('Failed to fetch your completed courses');\n          return;\n        }\n        \n        // Get all courses to match with progress\n        const coursesResult = await getCourses();\n        \n        if (!coursesResult.success) {\n          setError('Failed to fetch courses');\n          return;\n        }\n        \n        // Combine course data with progress data, only for completed courses\n        const completedWithCourseDetails = progressResult.progress\n          .filter(progress => progress.completed) // Only include completed courses\n          .map(progress => {\n            const courseDetails = coursesResult.courses.find(\n              course => course.id === progress.courseId\n            );\n            \n            return {\n              ...progress,\n              courseTitle: courseDetails?.title || 'Unknown Course',\n              courseDescription: courseDetails?.description || '',\n              courseCategory: courseDetails?.category || '',\n              courseImageUrl: courseDetails?.imageUrl || ''\n            };\n          });\n        \n        setCompletedCourses(completedWithCourseDetails);\n      } catch (err) {\n        setError('Error fetching completed courses: ' + err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCompletedCourses();\n  }, [currentUser]);\n\n  return (\n    <div className=\"completed-courses-container\">\n      <h1>Completed Courses</h1>\n      \n      {loading ? (\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading your completed courses...</p>\n        </div>\n      ) : error ? (\n        <div className=\"error-message\">{error}</div>\n      ) : completedCourses.length === 0 ? (\n        <div className=\"no-completed-message\">\n          <p>You haven't completed any courses yet.</p>\n          <button \n            className=\"browse-courses-button\" \n            onClick={() => navigate('/training')}\n          >\n            Browse Training Courses\n          </button>\n        </div>\n      ) : (\n        <div className=\"completed-courses-list\">\n          {completedCourses.map(course => (\n            <div key={course.id} className=\"completed-course-card\">\n              <div className=\"course-image\">\n                {course.courseImageUrl ? (\n                  <img src={course.courseImageUrl} alt={course.courseTitle} />\n                ) : (\n                  <div className=\"placeholder-image\">\n                    <span>{course.courseTitle.charAt(0)}</span>\n                  </div>\n                )}\n                <div className=\"course-category\">{course.courseCategory}</div>\n                <div className=\"completion-badge\">Completed</div>\n              </div>\n              \n              <div className=\"course-info\">\n                <h3>{course.courseTitle}</h3>\n                <p className=\"course-description\">{course.courseDescription}</p>\n                \n                <div className=\"completion-details\">\n                  <div className=\"completion-detail\">\n                    <span className=\"detail-label\">Completed On:</span>\n                    <span className=\"detail-value\">\n                      {new Date(course.completedAt).toLocaleDateString()}\n                    </span>\n                  </div>\n                  \n                  <div className=\"completion-detail\">\n                    <span className=\"detail-label\">Started On:</span>\n                    <span className=\"detail-value\">\n                      {new Date(course.startedAt).toLocaleDateString()}\n                    </span>\n                  </div>\n                </div>\n                \n                <button \n                  className=\"view-certificate-button\"\n                  onClick={() => navigate(`/certificate/${course.courseId}`)}\n                >\n                  View Certificate\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n      \n      <div className=\"courses-navigation\">\n        <button \n          className=\"view-progress-button\"\n          onClick={() => navigate('/progress')}\n        >\n          View Courses in Progress\n        </button>\n        <button \n          className=\"browse-courses-button\"\n          onClick={() => navigate('/training')}\n        >\n          Browse All Courses\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CompletedCourses;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}