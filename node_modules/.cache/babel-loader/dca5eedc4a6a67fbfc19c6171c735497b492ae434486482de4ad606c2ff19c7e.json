{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{getUserCourseProgress,getCourses}from'../firebase/firestore';import{useAuth}from'../components/AuthContext';import'../styles/CourseProgress.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CourseProgress=()=>{const{currentUser}=useAuth();const navigate=useNavigate();const[courseProgress,setCourseProgress]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchCourseProgress=async()=>{if(!currentUser)return;try{setLoading(true);// Get user's course progress\nconst progressResult=await getUserCourseProgress(currentUser.uid);if(!progressResult.success){setError('Failed to fetch your course progress');return;}// Get all courses to match with progress\nconst coursesResult=await getCourses();if(!coursesResult.success){setError('Failed to fetch courses');return;}// Combine course data with progress data\nconst progressWithCourseDetails=progressResult.progress.filter(progress=>!progress.completed)// Only include incomplete courses\n.map(progress=>{const courseDetails=coursesResult.courses.find(course=>course.id===progress.courseId);return{...progress,courseTitle:(courseDetails===null||courseDetails===void 0?void 0:courseDetails.title)||'Unknown Course',courseDescription:(courseDetails===null||courseDetails===void 0?void 0:courseDetails.description)||'',courseCategory:(courseDetails===null||courseDetails===void 0?void 0:courseDetails.category)||'',courseImageUrl:(courseDetails===null||courseDetails===void 0?void 0:courseDetails.imageUrl)||'',courseSections:(courseDetails===null||courseDetails===void 0?void 0:courseDetails.sections)||[]};});setCourseProgress(progressWithCourseDetails);}catch(err){setError('Error fetching course progress: '+err.message);}finally{setLoading(false);}};fetchCourseProgress();},[currentUser]);const handleContinueCourse=courseId=>{navigate(`/training/${courseId}`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"course-progress-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Course Progress\"}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading your course progress...\"})]}):error?/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}):courseProgress.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-progress-message\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"You don't have any courses in progress.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"browse-courses-button\",onClick:()=>navigate('/training'),children:\"Browse Training Courses\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"progress-courses-list\",children:courseProgress.map(progress=>{var _progress$courseSecti;return/*#__PURE__*/_jsxs(\"div\",{className:\"progress-course-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-image\",children:[progress.courseImageUrl?/*#__PURE__*/_jsx(\"img\",{src:progress.courseImageUrl,alt:progress.courseTitle}):/*#__PURE__*/_jsx(\"div\",{className:\"placeholder-image\",children:/*#__PURE__*/_jsx(\"span\",{children:progress.courseTitle.charAt(0)})}),/*#__PURE__*/_jsx(\"div\",{className:\"course-category\",children:progress.courseCategory})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:progress.courseTitle}),/*#__PURE__*/_jsx(\"p\",{className:\"course-description\",children:progress.courseDescription}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:`${progress.completionPercentage||0}%`}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"progress-percentage\",children:[progress.completionPercentage||0,\"% Complete\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"progress-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Current Section:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:((_progress$courseSecti=progress.courseSections[progress.currentSection])===null||_progress$courseSecti===void 0?void 0:_progress$courseSecti.title)||`Section ${progress.currentSection+1}`})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Started:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:new Date(progress.startedAt).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Last Updated:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"detail-value\",children:new Date(progress.updatedAt).toLocaleDateString()})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"continue-button\",onClick:()=>handleContinueCourse(progress.courseId),children:\"Continue Course\"})]})]},progress.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-navigation\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"view-completed-button\",onClick:()=>navigate('/completed-courses'),children:\"View Completed Courses\"}),/*#__PURE__*/_jsx(\"button\",{className:\"browse-courses-button\",onClick:()=>navigate('/training'),children:\"Browse All Courses\"})]})]});};export default CourseProgress;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","getUserCourseProgress","getCourses","useAuth","jsx","_jsx","jsxs","_jsxs","CourseProgress","currentUser","navigate","courseProgress","setCourseProgress","loading","setLoading","error","setError","fetchCourseProgress","progressResult","uid","success","coursesResult","progressWithCourseDetails","progress","filter","completed","map","courseDetails","courses","find","course","id","courseId","courseTitle","title","courseDescription","description","courseCategory","category","courseImageUrl","imageUrl","courseSections","sections","err","message","handleContinueCourse","className","children","length","onClick","_progress$courseSecti","src","alt","charAt","style","width","completionPercentage","currentSection","Date","startedAt","toLocaleDateString","updatedAt"],"sources":["/Users/kosiuko/Documents/mnv2spruces/src/pages/CourseProgress.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getUserCourseProgress, getCourses } from '../firebase/firestore';\nimport { useAuth } from '../components/AuthContext';\nimport '../styles/CourseProgress.css';\n\nconst CourseProgress = () => {\n  const { currentUser } = useAuth();\n  const navigate = useNavigate();\n  const [courseProgress, setCourseProgress] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchCourseProgress = async () => {\n      if (!currentUser) return;\n      \n      try {\n        setLoading(true);\n        \n        // Get user's course progress\n        const progressResult = await getUserCourseProgress(currentUser.uid);\n        \n        if (!progressResult.success) {\n          setError('Failed to fetch your course progress');\n          return;\n        }\n        \n        // Get all courses to match with progress\n        const coursesResult = await getCourses();\n        \n        if (!coursesResult.success) {\n          setError('Failed to fetch courses');\n          return;\n        }\n        \n        // Combine course data with progress data\n        const progressWithCourseDetails = progressResult.progress\n          .filter(progress => !progress.completed) // Only include incomplete courses\n          .map(progress => {\n            const courseDetails = coursesResult.courses.find(\n              course => course.id === progress.courseId\n            );\n            \n            return {\n              ...progress,\n              courseTitle: courseDetails?.title || 'Unknown Course',\n              courseDescription: courseDetails?.description || '',\n              courseCategory: courseDetails?.category || '',\n              courseImageUrl: courseDetails?.imageUrl || '',\n              courseSections: courseDetails?.sections || []\n            };\n          });\n        \n        setCourseProgress(progressWithCourseDetails);\n      } catch (err) {\n        setError('Error fetching course progress: ' + err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCourseProgress();\n  }, [currentUser]);\n\n  const handleContinueCourse = (courseId) => {\n    navigate(`/training/${courseId}`);\n  };\n\n  return (\n    <div className=\"course-progress-container\">\n      <h1>My Course Progress</h1>\n      \n      {loading ? (\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading your course progress...</p>\n        </div>\n      ) : error ? (\n        <div className=\"error-message\">{error}</div>\n      ) : courseProgress.length === 0 ? (\n        <div className=\"no-progress-message\">\n          <p>You don't have any courses in progress.</p>\n          <button \n            className=\"browse-courses-button\" \n            onClick={() => navigate('/training')}\n          >\n            Browse Training Courses\n          </button>\n        </div>\n      ) : (\n        <div className=\"progress-courses-list\">\n          {courseProgress.map(progress => (\n            <div key={progress.id} className=\"progress-course-card\">\n              <div className=\"course-image\">\n                {progress.courseImageUrl ? (\n                  <img src={progress.courseImageUrl} alt={progress.courseTitle} />\n                ) : (\n                  <div className=\"placeholder-image\">\n                    <span>{progress.courseTitle.charAt(0)}</span>\n                  </div>\n                )}\n                <div className=\"course-category\">{progress.courseCategory}</div>\n              </div>\n              \n              <div className=\"course-info\">\n                <h3>{progress.courseTitle}</h3>\n                <p className=\"course-description\">{progress.courseDescription}</p>\n                \n                <div className=\"progress-bar-container\">\n                  <div className=\"progress-bar\">\n                    <div \n                      className=\"progress-fill\" \n                      style={{ width: `${progress.completionPercentage || 0}%` }}\n                    ></div>\n                  </div>\n                  <span className=\"progress-percentage\">{progress.completionPercentage || 0}% Complete</span>\n                </div>\n                \n                <div className=\"progress-details\">\n                  <div className=\"progress-detail\">\n                    <span className=\"detail-label\">Current Section:</span>\n                    <span className=\"detail-value\">\n                      {progress.courseSections[progress.currentSection]?.title || `Section ${progress.currentSection + 1}`}\n                    </span>\n                  </div>\n                  \n                  <div className=\"progress-detail\">\n                    <span className=\"detail-label\">Started:</span>\n                    <span className=\"detail-value\">\n                      {new Date(progress.startedAt).toLocaleDateString()}\n                    </span>\n                  </div>\n                  \n                  <div className=\"progress-detail\">\n                    <span className=\"detail-label\">Last Updated:</span>\n                    <span className=\"detail-value\">\n                      {new Date(progress.updatedAt).toLocaleDateString()}\n                    </span>\n                  </div>\n                </div>\n                \n                <button \n                  className=\"continue-button\"\n                  onClick={() => handleContinueCourse(progress.courseId)}\n                >\n                  Continue Course\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n      \n      <div className=\"progress-navigation\">\n        <button \n          className=\"view-completed-button\"\n          onClick={() => navigate('/completed-courses')}\n        >\n          View Completed Courses\n        </button>\n        <button \n          className=\"browse-courses-button\"\n          onClick={() => navigate('/training')}\n        >\n          Browse All Courses\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CourseProgress;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}